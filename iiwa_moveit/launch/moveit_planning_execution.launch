<?xml version="1.0"?>
<launch>
    <!-- The planning and execution components of MoveIt! configured to run -->
    <!-- using the ROS-Industrial interface. -->
    
    <!-- | 		PARAMETERS  		| -->
    <arg name="sim" default="true" />
    <arg name="robot_name" default="iiwa"/>
    <arg name="model" default="iiwa14"/>
    <arg name="rviz" default="true" />
    <arg name="hardware_interface" default="PositionJointInterface" />

    <group ns="$(arg robot_name)">
      <!-- <remap from="/tf" to="tf" /> -->
      <!-- <remap from="/tf_static" to="tf_static" /> -->
      
      <rosparam command="load" file="$(find iiwa_moveit)/config/joint_names.yaml" />
      
      <!-- load robot_description parameters before launching ROS-I nodes -->
      <include file="$(find iiwa_moveit)/launch/planning_context.launch" >
	<arg name="load_robot_description" value="true" />
	<arg name="robot_name" value="$(arg robot_name)" />
	<arg name="model" value="$(arg model)" />
      </include>
    
      <!-- Run the robot simulator and action interface nodes. -->
      <group if="$(arg sim)">
        <include file="$(find industrial_robot_simulator)/launch/robot_interface_simulator.launch" />
      </group>
    
      <!-- Working with the real robot.  -->
      <group unless="$(arg sim)">
        
        <!-- Load controllers accordingly to parameters -->
        <include file="$(find iiwa_control)/launch/iiwa_control.launch">
          <arg name="hardware_interface" value="$(arg hardware_interface)" />
          <arg name="controllers" value="joint_state_controller $(arg hardware_interface)_trajectory_controller" />
          <arg name="robot_name" value="$(arg robot_name)" />
          <arg name="model" value="$(arg model)" />
        </include>
        
        <!-- Robot interface -->
        <include file="$(find iiwa_hw)/launch/iiwa_hw.launch" >
          <arg name="hardware_interface" value="$(arg hardware_interface)" />
        </include>
        
      </group>
      
      <!-- Load move_group -->
      <include file="$(find iiwa_moveit)/launch/move_group.launch">
        <arg name="publish_monitored_planning_scene" value="true" />
        <arg name="model" value="$(arg model)" />
      </include>
      
      <include if="$(arg rviz)" file="$(find iiwa_moveit)/launch/moveit_rviz.launch">
        <arg name="config" value="true"/>
      </include>
    </group>
    
</launch>
